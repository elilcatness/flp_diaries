#### Формальная система

- Алфавит
- Формулы
- Аксиомы - подмножество формул
- Правила вывода формул из других формул

Любая формула может быть выведена из аксиомы. Если формула не может быть выведена из аксиомы, тогда она не принадлежит этой формальной системе.

**Примеры формальной логики**

- [логика высказываний](https://ru.wikipedia.org/wiki/%D0%9B%D0%BE%D0%B3%D0%B8%D0%BA%D0%B0_%D0%B2%D1%8B%D1%81%D0%BA%D0%B0%D0%B7%D1%8B%D0%B2%D0%B0%D0%BD%D0%B8%D0%B9) (нулевого порядка)
- логика первого порядка
- логика высших порядков

##### Логика высказываний (нулевого порядка)

![[Pasted image 20240614205252.png]]

***Modus Ponens* - применение**

$$\frac{A,A\to B}{B}$$
- две стороны данного треугольника равны одному и тому же - формула $A$
- два объекта, равные одному и тому же, равны между собой - формула $A\to B$
- $B$ - значит, две стороны данного треугольника равны между собой - формула $B$

##### Логика первого порядка

###### Алфавит

- Алфавит:
	- функциональные символы (с арностью)
	- предикатные символы (с арностью)
	- переменные и константы
	- логические операции `не`, `и`, `или`, `импликация`
	- кванторы всеобщности ($\forall$) и существования ($\exists$)
	- служебные символы - скобки, запятая (для задания порядка).

*Арность* - количество аргументов.

**Предикат** - это утверждение, заданное на переменных и константах.

**Пример.** 
`Иванов - студент` - предикат.
`Иванов` - константа.

Предикат, как и функциональный символ, должны иметь фиксированную *арность*, то есть фиксированное количество аргументов.

**Функциональный символ** определяет функцию.

**Пример.**
Умножение. 
Арность = 2.

###### Формулы

- **Термы (объекты исчисления)**
	- переменные и константы
	- конструкции вида $f(t_1,...,t_n)$, где $f$ - функциональный символ и $t_x$ - терм.
- **Атомы (элементарные формулы)**
	- конструкции вида $p(t_1,...,t_n)$, где $p$ - предикатный символ и $t_x$ - терм
	- *литерал* - атом или его отрицание.
- **Формула**
	- атом
	- если $F,F_1,F_2$ - формулы, а $x$ - переменная, то также формулами являются выражения:
		- $\neg F$
		- $F_1\lor F_2$
		- $F_1\land F_2$
		- $F_1\to F_2$
		- $\forall xF$
		- $\exists xF$
		$xF$ - *"для $x$ верно утверждение $F$"*
- Переменная в формуле может быть связанной и несвязанной.

###### Вывод

- **Аксиомы**
	- Аксиомы логики нулевого порядка
	- Аксиомы для кванторов
		- $\forall xA\to A[t\space\space\not\space x]$.
		- $A[t\space\space\not\space x]\to \exists xA$
- **Правила вывода**
	- Modus Ponens: $\frac{A,\space A\space\to\space B}{B}$
	- Обобщение $\frac{A}{\forall xA}$
		*Если формула верна, то она верна для любого значения $x$.*
		Используется в обратную сторону при приведении формулы к виду множества дизъюнктов.

##### Дизъюнкты

**Дизъюнкт** - дизъюнкция (логическое `ИЛИ`) конечного числа литералов. Если это число 0, то такой дизъюнкт называют пустым.

**Нормальные формы:**

- **Конъюнктивная нормальная форма** - *конъюнкция конечного числа дизъюнктов* (есть ещё дизъюнктивная нормальная форма - дизъюнкция конечного числа конъюнктов; есть теорема, утверждающая, что любую формулу можно представить как в той, так и в другой форме).
- **Предварённая нормальная форма** - *все кванторы собраны в начале формулы.*
	- Кванторы называются *префиксом* формулы, находящейся в предварённой нормальной форме.
	- Остальная часть называется *матрицей*.
- **Сколемовская нормальная форма** - *предварённая нормальная форма, в которой нет кванторов существования.*

**Любую формулу можно представить в виде множества дизъюнктов:**

1. Представить формулу в виде предварённой нормальной формы
2. Преобразовать в Сколемовскую нормальную форму
3. Преобразовать в конъюнктивную нормальную форму
4. Получить множество дизъюнктов за счёт удаления конъюнкций

###### Преобразование формулы. Шаг 1

**Исключение импликации**
$$A\to B \equiv\lnot A\lor B$$

###### Преобразование формулы. Шаг 2

**Законы де Моргана**
$$\displaylines{\lnot(A\lor B)\equiv\lnot A\land\lnot B \\ \lnot(A\land B)\equiv\lnot A\lor\lnot B \\ \lnot(\exists xA)\equiv\forall x\not A \\ \lnot(\forall xA)\equiv\exists x\lnot A \\ \lnot\lnot A\equiv A}$$

###### Преобразование формулы. Шаг 3.

**Переименование переменных**

$$\displaylines{\forall x\space p(x)\lor\exists x\space q(x) \\ \Downarrow \\ \forall x\space p(x)\lor\exists y\space q(y)}$$
В первом выражении в левой части один $x$, а в правой - другой, из-за чего при преобразовании может произойти смешение.

###### Преобразование формулы. Шаг 4.

**Вынесение кванторов в префикс**

![[Pasted image 20240614224731.png]]

###### Преобразование формулы. Шаг 5.

**Сколемизация** - исключение кванторов существования.

![[Pasted image 20240614225149.png]]

Всегда рассматривается самый левый квантор существования.

**Пример для 1-го преобразования:**
Существует такой студент, что для любого предмета он его сдал.
`x` - студент, `y` - предмет, `P` - утверждение, что он сдан.
*Преобразование:*
Для любого предмета верно утверждение, что сдал `Иванов` этот предмет.

**Пример для 2-го преобразования:**
Для любого факультета и для любой кафедры существует такой студент, что для любого предмета он его сдал.
`a` - факультет, `b` - кафедра.
*Преобразование:*
Для любого факультета, кафедры, предмета верно утверждение, что $f(a,b)$ помогает определить студента по факультету и кафедре, который сдал любой предмет.

###### Преобразование формулы. Шаг 6.

**Просто удаляем все кванторы общности**

$$\forall a\forall b\forall y\space P(x,y,a,b)\to P(x,y,a,b)$$

###### Преобразование формулы. Шаг 7.

**Приводим матрицу к нормальной конъюнктивной форме (НКФ), используя соотошения дистрибутивности**

$$\displaylines{A \lor (B \land C) \equiv (A \lor B) \land (A \lor C) \\ A \land (B \lor C) \equiv (A \land B) \lor (A \land C)}$$

###### Преобразование формулы. Шаг 8.

**Удалив из НКФ все конъюнкции, получаем множество дизъюнктов.**

##### Унификация и подстановка

- Формула является тождественно ложной тогда, и только тогда, когда множество дизъюнктов, полученных из неё, является невыполнимым (нет такого означивания переменных, чтобы все формулы в этом множестве были истинными).
- Поэтому для доказательства истинности формулы надо найти такую **подстановку** (значений в переменные), чтобы все формулы были истинными.
- **Унификация** - алгоритм отождествления формул логики первого порядка.

**Подстановка**

$$\left\{ \frac{x_1}{t_1}\frac{x_2}{t_2}...\frac{x_n}{t_n} \right\}$$
$x_i$ - значения переменных, $t_i$ - термы.

![[Pasted image 20240614234424.png]]

![[Pasted image 20240614234606.png]]
Переформулированный Modus Ponens
Часть внизу называется *резольвентой*.

**Пример.**

- `A` - человек перешёл на следующий курс
- `P` - человек отправился в армию
- `B` - человек был отчислен

##### Линейная резолюция хорновских дизъюнктов

**Хорновский дизъюнкт** - дизъюнкт, содержащий в себе не более одного положительного вхождения литерала.

**Пример.**
Студент перевёлся на другой курс `ИЛИ` Не сдал функциональное и логическое программирование `ИЛИ` Не сдал философию

**Метод резолюции на хорновском дизъюнкте гарантированно даёт хорновский дизъюнкт.**

Поэтому в Prolog используется резолюция именно хорновских дизъюнктов.

**Метод резолюции** - *метод, который является вариантом доказательства от противного*. Добавляем к множеству аксиом добавляем отрицание наших формул и выполняем резолюцию до тех пор, пока наши дизъюнкты полностью не закончатся. Если они все закончились, то исходная формула была верна. Иначе была неверна.

Обычная резолюция может приводить к **комбинаторному взрыву.**

**Линейная резолюция** - это резолюция, в которой все дизъюнкты отсортированы определённым образом. Если не удалось найти унификатор, то делаем шаг назад и выбираем следующий дизъюнт. 