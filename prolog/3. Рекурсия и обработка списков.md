#### Рекурсия

##### Факториал

$$\begin{cases}1,\space n=0\\n\cdot(n-1)!,\space n>0\end{cases}$$

```prolog
factorial(0,1):-!.
factorial(X,Y):-X1 is X-1,factorial(X1,Y1),Y is X*Y1.
```

##### Числа Фибоначчи

```prolog
fib(0,0):-!.
fib(1,1):-!.
fib(X,Y):-X>1,X1 is X-1,X2 is X-2,fib(X1,Y1),fib(X2,Y2),Y is Y1+Y2
```

Возникает комбинаторный взрыв

##### Числа Фибоначчи (без комбинаторного взрыва)

```prolog
fib(1,1,0).
fib(X,Y,Z):-X>1,X1 is X-1,fib(X1,Z,Z1),Y is Z1+Z.
```

### Списки

##### Объявление списка

- в квадратных скобках через запятую
	`[1,2,3,4,5]`
- могут быть вложенными
	`[[1,2],[3,4]]`
- список делится на голову и хвост

##### Унификация списков

- `[]` - пустой список
- `[H|T]` унифицируется с непустым списком, при этом `H` - голова, а `T` - хвост
- если надо унифицировать больше элементов за один раз, то `[H,H1|T]` - унификация двух первых элементов
- возможны конструкции вида `[H|[]]` - унифицируется со списком одного элемента (не во всех реализациях Prolog)

##### Примеры

###### Проверка на наличие в списке

```prolog
mymember(X,[X|_]):-!.
mymember(X,[_|T]):-member(X,T).
```

###### Определение индекса

```prolog
myfind(X,[X|_],0):-!.
myfind(X,[_|T],Y):-myfind(X,T,Y1),Y is Y1+1.
```

###### Определение длины

```prolog
mylength([],0).
mylength([_|T],X):-mylength(T,Y),X is Y+1.
```

###### Сумма списка

```prolog
mysum([],0).
mysum([H|T],X):-mysum(T,Y),X is Y+H.
```

###### Удаление элемента из списка

```prolog
myremove(X,[X|T],T):-!.
myremove(X,[H|T],[H|T1]):-myremove(X,T,T1).
```